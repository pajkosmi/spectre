<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="author" content="SXS Collaboration">
    <meta name="generator" content="Doxygen 1.9.3"/>
  <title>SpECTRE: Code Review Guide</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="./MathJax.js"></script>
  <link href="octicons.css" rel="stylesheet">
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
  <script src="https://unpkg.com/@popperjs/core@2"></script>
  <script src="https://unpkg.com/tippy.js@6"></script>
  <script type="text/javascript" src="spectre.js"></script>
  <script type="text/javascript" src="doxygen-navtree-hacks.js"></script>
  <script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
  <script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
  <script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
  <script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeParagraphLink.init()
  </script>
  </head>
  <body>
  <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
  <div id="titlearea">
    <table cellspacing="0" cellpadding="0">
      <tbody>
        <tr style="height: 56px;">
          <td id="projectalign" style="padding-left: 0.5em;">
            <div id="projectname">
              <a href="index.html">SpECTRE</a>
              &#160;<span id="projectnumber">v2023.06.19</span>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('code_review_guide.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Code Review Guide </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_docs_DevGuide_CodeReviewGuide"></a></p>
<p >Code must follow the <a href="https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md">C++ Core Guidelines</a> and the <a href="https://google.github.io/styleguide/cppguide.html">Google style guide</a>. If the Google style guide disagrees with the Core Guidelines, follow the Core Guidelines. Python code must also follow the <a href="https://google.github.io/styleguide/pyguide.html">Google style guide</a>.</p>
<p >Here we summarize what we view as the more important portions of the guides.</p>
<p >Stylistic Items:</p>
<ul>
<li>Adhere to <a href="https://google.github.io/styleguide/cppguide.html">Google style</a>. [Can use <code>clang-format -style=google</code>] (<a href="http://clang.llvm.org/docs/ClangFormat.html">http://clang.llvm.org/docs/ClangFormat.html</a>).</li>
<li>CamelCase: class names template parameters, file names, and directory names.</li>
<li>snake_case: function, variable, metafunction and metavariable names.</li>
<li>SCREAMING_SNAKE_CASE: macros.</li>
<li>Functions or classes only used internally in a library should be in a namespace named <code>LibraryOrFile_detail</code>. For example, <code>databox_detail</code>, <code>Tensor_detail</code> or <code>ConstantExpressions_detail</code>.</li>
<li>Name unused function parameters <code>/*parameter_name*/</code> or <code>/*meta*/</code> for TMP cases</li>
<li>Type aliases that wrap type traits have a trailing <code>_t</code> following the STL</li>
<li>Private member variables have a [trailing underscore] (<a href="https://google.github.io/styleguide/cppguide.html#Variable_Names">https://google.github.io/styleguide/cppguide.html#Variable_Names</a>).</li>
<li>Do not use <a href="https://en.wikipedia.org/wiki/Hungarian_notation">Hungarian notation</a>, e.g. <code>double* pd_blah</code> is bad</li>
<li>Header order:<ol type="1">
<li>(If a test:) <code>Framework/TestingFramework.hpp</code>, followed by one blank line</li>
<li>(If a cpp file with a corresponding hpp file:) hpp corresponding to cpp, followed by one blank line</li>
<li>STL and externals (in alphabetical order)</li>
<li>Blank line</li>
<li>SpECTRE includes (in alphabetical order)</li>
</ol>
</li>
<li>Template definitions in header files are separated from the declaration of the class by the following line, which contains exactly 64 equal signs <div class="fragment"><div class="line">// ================================================================</div>
</div><!-- fragment --></li>
<li>File lists in CMake are alphabetical.</li>
<li>No blank lines surrounding Doxygen group comments (<code>// @{</code> and <code>// @}</code>).</li>
<li>Use the [alternative tokens] (<a href="http://en.cppreference.com/w/cpp/language/operator_alternative">http://en.cppreference.com/w/cpp/language/operator_alternative</a>) <code>or</code>, <code>and</code>, and <code>not</code> instead of <code>||</code>, <code>&amp;&amp;</code>, and <code>!</code>.</li>
<li>Use C-style Doxygen comments (<code>/*! ... */</code>) when using multi-line math, otherwise C-style and C++ style comments are accepted.</li>
<li>Use the <code>align</code> environment instead of <code>eqnarray</code>. See the <a href="https://texfaq.org/FAQ-eqnarray">texfaq</a> for an explanation as to why.</li>
<li>Multi-line equations must have a blank Doxygen line before and after the equation.</li>
<li>When addressing requests on a PR, the commit message must start with <code>fixup</code> followed by a descriptive message.</li>
<li>All python code must comply with the <a href="https://github.com/psf/black">black</a> formatting specified by the <code>pyproject.toml</code> file.</li>
<li>Imports in Python code must be sorted to comply to the <a href="https://github.com/PyCQA/isort">isort</a> formatting specified in the <code>pyproject.toml</code> file.</li>
</ul>
<p >Code Quality Items:</p>
<ul>
<li>All code passes Clang and CppCheck static analyzers. For help with these tools see <a class="el" href="static_analysis_tools.html">here</a>.</li>
<li>Almost always <code>auto</code>, except with expression templates, i.e. <code><a class="el" href="classDataVector.html" title="Stores a collection of function values.">DataVector</a></code></li>
<li>All loops and if statements use braces.</li>
<li>Order of declaration in classes is <code>public</code> before <code>private</code> and member functions before data. See <a href="https://google.github.io/styleguide/cppguide.html#Declaration_Order">Google</a>.</li>
<li>Prefer return by value over pass-by-mutable-reference except when mutable reference provides superior performance (in practice if you need a mutable reference use <code>const <a class="el" href="classgsl_1_1not__null.html" title="Require a pointer to not be a nullptr">gsl::not_null</a>&lt;Type*&gt;</code> instead of <code>Type&amp;</code>). The mutable references must be the first arguments passed to the function.</li>
<li>All commits for performance changes provide quantitative evidence and the tests used to obtain said evidence.</li>
<li>Never include <code>&lt;iostream&gt;</code>, use <code><a class="el" href="group__ParallelGroup.html#gae21964b5d28608afd21ae090c1c4c073" title="Print an atomic message to stdout with C printf usage.">Parallel::printf</a></code> inside <code>Parallel/Printf.hpp</code> instead, which is safe to use in parallel.</li>
<li>When using charm++ nodelocks include <code>&lt;converse.h&gt;</code> instead of <code>&lt;lrtslock.h&gt;</code>.</li>
<li>Do not add anything to [the <code>std</code> namespace] (<a href="http://en.cppreference.com/w/cpp/language/extending_std">http://en.cppreference.com/w/cpp/language/extending_std</a>).</li>
<li>Virtual functions are explicitly overridden using the <code>override</code> keyword.</li>
<li><code>#pragma once</code> is to be used for header guards</li>
<li>Prefer range-based for loops</li>
<li>Use <code>size_t</code> for positive integers rather than <code>int</code>, specifically when looping over containers. This is in compliance with what the STL uses.</li>
<li>Error messages should be helpful. An example of a bad error message is "Size
  mismatch". Instead this message could read "The number of grid points in the
  matrix 'F' is not the same as the number of grid points in the determinant.", along with the runtime values of the mentioned quantities if applicable.</li>
<li>Mark immutable objects as <code>const</code></li>
<li>Make classes serializable by writing a <code>pup</code> function</li>
<li>If a class stores an object passed into a constructor the object should be taken by-value and <code>std::move</code>d into the member variable.</li>
<li>Definitions of function and class templates should be in <code>.cpp</code> files with explicit instantiations whenever possible. The macro <code>GENERATE_EXPLICIT_INSTANTIATIONS</code> is useful for generating many explicit instantiations.</li>
<li>Functions should not be marked <code>noexcept</code> unless it is part of the signature of an overriden function (e.g. the what() function of an exception derived from <a class="elRef" href="http://en.cppreference.com/w/cpp/error/exception.html">std::exception</a>).</li>
<li>Variable names in macros must avoid name collisions, e.g. inside the <code>PARSE_ERROR</code> macro you would write <code>double variable_name_avoid_name_collisions_PARSE_ERROR = 0.0;</code></li>
<li>Avoid macros if possible. Prefer <code>constexpr</code> functions, constexpr variables, and/or template metaprogramming</li>
<li>Explicitly specify <code>double</code>s, e.g. <code>sqrt(2.)</code> or <code>sqrt(2.0)</code> instead of <code>sqrt(2)</code>.</li>
<li>When the index of a <code>Tensor</code> is known at compile time, use <code>get&lt;a, b&gt;(tensor)</code> instead of the member <code>get</code> function.</li>
<li>All necessary header files must be included. In header files, prefer forward declarations if class definitions aren't necessary.</li>
<li>Explicitly make numbers floating point, e.g. <code>2.</code> or <code>2.0</code> over <code>2</code>.</li>
<li>Avoid <code>mutable</code> member variables. If you think you really need these, discuss with at least 2 core developers. In a parallel environment <code>mutable</code> variables lead to race conditions since multiple threads can mutate a single object by calling a <code>const</code> member function. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dev_guide.html">Developer Guides</a></li>
    <li class="footer">
    &copy; Copyright 2017 - 2023
    <a href="https://black-holes.org">SXS Collaboration</a>,
    <a href="LICENSE.txt" target="_blank">
    <span class="hidden-xs">Distributed under the</span>
    MIT License</a>
  </ul>
</div>
</body>
</html>
