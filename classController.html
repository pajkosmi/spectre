<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="author" content="SXS Collaboration">
    <meta name="generator" content="Doxygen 1.9.3"/>
  <title>SpECTRE: Controller&lt; DerivOrder &gt; Class Template Reference</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="./MathJax.js"></script>
  <link href="octicons.css" rel="stylesheet">
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
  <script src="https://unpkg.com/@popperjs/core@2"></script>
  <script src="https://unpkg.com/tippy.js@6"></script>
  <script type="text/javascript" src="spectre.js"></script>
  <script type="text/javascript" src="doxygen-navtree-hacks.js"></script>
  <script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
  <script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
  <script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
  <script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeParagraphLink.init()
  </script>
  </head>
  <body>
  <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
  <div id="titlearea">
    <table cellspacing="0" cellpadding="0">
      <tbody>
        <tr style="height: 56px;">
          <td id="projectalign" style="padding-left: 0.5em;">
            <div id="projectname">
              <a href="index.html">SpECTRE</a>
              &#160;<span id="projectnumber">v2023.06.19</span>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classController.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classController-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Controller&lt; DerivOrder &gt; Class Template Reference<div class="ingroups"><a class="el" href="group__ControlSystemGroup.html">Control System</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>A PND (proportional to Q and N derivatives of Q) controller that computes the control signal:  
 <a href="classController.html#details">More...</a></p>

<p><code>#include &lt;Controller.hpp&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structController_1_1UpdateFraction.html">UpdateFraction</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a9cdae788587784a2ca2a31935056de4c"><td class="memItemLeft" align="right" valign="top"><a id="a9cdae788587784a2ca2a31935056de4c" name="a9cdae788587784a2ca2a31935056de4c"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>options</b> = tmpl::list&lt; <a class="el" href="structController_1_1UpdateFraction.html">UpdateFraction</a> &gt;</td></tr>
<tr class="separator:a9cdae788587784a2ca2a31935056de4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a900f474d06a6c72d559c2bb950d5f12d"><td class="memItemLeft" align="right" valign="top"><a id="a900f474d06a6c72d559c2bb950d5f12d" name="a900f474d06a6c72d559c2bb950d5f12d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Controller</b> (const double update_fraction)</td></tr>
<tr class="separator:a900f474d06a6c72d559c2bb950d5f12d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11170d7c69d7505f90d2ebc5407ad601"><td class="memItemLeft" align="right" valign="top"><a id="a11170d7c69d7505f90d2ebc5407ad601" name="a11170d7c69d7505f90d2ebc5407ad601"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Controller</b> (<a class="el" href="classController.html">Controller</a> &amp;&amp;)=default</td></tr>
<tr class="separator:a11170d7c69d7505f90d2ebc5407ad601"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae7afe178b6edae0e9ef4a5bc8b2b0be"><td class="memItemLeft" align="right" valign="top"><a id="aae7afe178b6edae0e9ef4a5bc8b2b0be" name="aae7afe178b6edae0e9ef4a5bc8b2b0be"></a>
<a class="el" href="classController.html">Controller</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (<a class="el" href="classController.html">Controller</a> &amp;&amp;)=default</td></tr>
<tr class="separator:aae7afe178b6edae0e9ef4a5bc8b2b0be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a1ac949fc3a3d38715d4359f59f050e"><td class="memItemLeft" align="right" valign="top"><a id="a5a1ac949fc3a3d38715d4359f59f050e" name="a5a1ac949fc3a3d38715d4359f59f050e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Controller</b> (const <a class="el" href="classController.html">Controller</a> &amp;)=default</td></tr>
<tr class="separator:a5a1ac949fc3a3d38715d4359f59f050e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf1ff84db95b25937e1883a3f1038062"><td class="memItemLeft" align="right" valign="top"><a id="abf1ff84db95b25937e1883a3f1038062" name="abf1ff84db95b25937e1883a3f1038062"></a>
<a class="el" href="classController.html">Controller</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classController.html">Controller</a> &amp;)=default</td></tr>
<tr class="separator:abf1ff84db95b25937e1883a3f1038062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e6347c245fcfb481790ebae19cf9425"><td class="memItemLeft" align="right" valign="top"><a id="a7e6347c245fcfb481790ebae19cf9425" name="a7e6347c245fcfb481790ebae19cf9425"></a>
<a class="el" href="classDataVector.html">DataVector</a>&#160;</td><td class="memItemRight" valign="bottom"><b>operator()</b> (const double time, const <a class="el" href="classDataVector.html">DataVector</a> &amp;timescales, const <a class="elRef" href="http://en.cppreference.com/w/cpp/container/array.html">std::array</a>&lt; <a class="el" href="classDataVector.html">DataVector</a>, DerivOrder &gt; &amp;q_and_derivs, double q_time_offset, double deriv_time_offset)</td></tr>
<tr class="separator:a7e6347c245fcfb481790ebae19cf9425"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa133d5cca01991325afd44cf3a179971"><td class="memItemLeft" align="right" valign="top"><a id="aa133d5cca01991325afd44cf3a179971" name="aa133d5cca01991325afd44cf3a179971"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>assign_time_between_updates</b> (const double current_min_timescale)</td></tr>
<tr class="memdesc:aa133d5cca01991325afd44cf3a179971"><td class="mdescLeft">&#160;</td><td class="mdescRight">Takes the current minimum of all timescales for a specific control system and uses that to set the time between updates. <br /></td></tr>
<tr class="separator:aa133d5cca01991325afd44cf3a179971"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51eed849fb0f1e73f611ba28467e332d"><td class="memItemLeft" align="right" valign="top"><a id="a51eed849fb0f1e73f611ba28467e332d" name="a51eed849fb0f1e73f611ba28467e332d"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>is_ready</b> (const double time)</td></tr>
<tr class="memdesc:a51eed849fb0f1e73f611ba28467e332d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns <code>true</code> if the controller is ready to calculate the control signal. <br /></td></tr>
<tr class="separator:a51eed849fb0f1e73f611ba28467e332d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92223c054e642a1fe108006e6e3fa0b9"><td class="memItemLeft" align="right" valign="top"><a id="a92223c054e642a1fe108006e6e3fa0b9" name="a92223c054e642a1fe108006e6e3fa0b9"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>next_expiration_time</b> (const double current_expiration_time)</td></tr>
<tr class="memdesc:a92223c054e642a1fe108006e6e3fa0b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the new expiration time as the old expiration time plus the time between updates. <br /></td></tr>
<tr class="separator:a92223c054e642a1fe108006e6e3fa0b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2440ed37220189b7103f81e9def224c5"><td class="memItemLeft" align="right" valign="top"><a id="a2440ed37220189b7103f81e9def224c5" name="a2440ed37220189b7103f81e9def224c5"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_initial_update_time</b> (const double initial_time)</td></tr>
<tr class="memdesc:a2440ed37220189b7103f81e9def224c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the last time updated to the initial time. <br /></td></tr>
<tr class="separator:a2440ed37220189b7103f81e9def224c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84a47daae95082551d0e8a216ffecefa"><td class="memItemLeft" align="right" valign="top"><a id="a84a47daae95082551d0e8a216ffecefa" name="a84a47daae95082551d0e8a216ffecefa"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>get_update_fraction</b> () const</td></tr>
<tr class="memdesc:a84a47daae95082551d0e8a216ffecefa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the update fraction. <br /></td></tr>
<tr class="separator:a84a47daae95082551d0e8a216ffecefa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee2aa0c151fcee89d9ad442e11937658"><td class="memItemLeft" align="right" valign="top"><a id="aee2aa0c151fcee89d9ad442e11937658" name="aee2aa0c151fcee89d9ad442e11937658"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>pup</b> (PUP::er &amp;p)</td></tr>
<tr class="separator:aee2aa0c151fcee89d9ad442e11937658"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a0d5c47b4a4fd26faef0524f49c7cc5aa"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="namespaceOptions.html#aa61c7f41f21afa7646811456f673be89">Options::String</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classController.html#a0d5c47b4a4fd26faef0524f49c7cc5aa">help</a></td></tr>
<tr class="separator:a0d5c47b4a4fd26faef0524f49c7cc5aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="friends" name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:aae69b78cffa51c7a3dd64b8e3fbdc4ae"><td class="memTemplParams" colspan="2"><a id="aae69b78cffa51c7a3dd64b8e3fbdc4ae" name="aae69b78cffa51c7a3dd64b8e3fbdc4ae"></a>
template&lt;size_t LocalDerivOrder&gt; </td></tr>
<tr class="memitem:aae69b78cffa51c7a3dd64b8e3fbdc4ae"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><b>operator==</b> (const <a class="el" href="classController.html">Controller</a>&lt; LocalDerivOrder &gt; &amp;lhs, const <a class="el" href="classController.html">Controller</a>&lt; LocalDerivOrder &gt; &amp;rhs)</td></tr>
<tr class="separator:aae69b78cffa51c7a3dd64b8e3fbdc4ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;size_t DerivOrder&gt;<br />
class Controller&lt; DerivOrder &gt;</div><p >A PND (proportional to Q and N derivatives of Q) controller that computes the control signal: </p>
<p class="formulaDsp">
\[ U(t) = \sum_{k=0}^{N} a_{k} \frac{d^kQ}{dt^k} \]
</p>
<p> where N is specified by the template parameter <code>DerivOrder</code>.</p>
<p >If an averager is used for <code>q_and_derivs</code> (as we typically do), there is an induced time offset, \(\Delta t\), due to the time-weighted averaging. Therefore, the <code>q_and_derivs</code> that we have in hand are at some time \(t_{0}\). However, we desire <code>q_and_derivs</code> at the current time \(t = t_{0} + \Delta t\) to determine the appropriate control signal. We accomplish this by Taylor expanding \(Q(t_{0} + \Delta t)\). The averager allows for averaging of \(Q\) and its derivatives OR to not average \(Q\) while still averaging the derivatives (the derivatives are always averaged in order to reduce noise due to numerical differentiation). When they are both averaged, the time offset will be identical for \(Q\) and the derivatives, i.e. <code>q_time_offset</code> = <code>deriv_time_offset</code>. If an unaveraged \(Q\) is used, then the time offset associated with \(Q\) is zero, i.e. <code>q_time_offset</code>=0. and the derivative time offset, <code>deriv_time_offset</code>, remains non-zero. </p>
</div><h2 class="groupheader">Member Data Documentation</h2>
<a id="a0d5c47b4a4fd26faef0524f49c7cc5aa" name="a0d5c47b4a4fd26faef0524f49c7cc5aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d5c47b4a4fd26faef0524f49c7cc5aa">&#9670;&nbsp;</a></span>help</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;size_t DerivOrder&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr <a class="el" href="namespaceOptions.html#aa61c7f41f21afa7646811456f673be89">Options::String</a> <a class="el" href="classController.html">Controller</a>&lt; DerivOrder &gt;::help</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">{</div>
<div class="line">      <span class="stringliteral">&quot;Computes control signal used to reset highest derivative of a function &quot;</span></div>
<div class="line">      <span class="stringliteral">&quot;of time. Also determines when a function of time needs to be updated &quot;</span></div>
<div class="line">      <span class="stringliteral">&quot;next.&quot;</span>}</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/ControlSystem/Controller.hpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classController.html">Controller</a></li>
    <li class="footer">
    &copy; Copyright 2017 - 2023
    <a href="https://black-holes.org">SXS Collaboration</a>,
    <a href="LICENSE.txt" target="_blank">
    <span class="hidden-xs">Distributed under the</span>
    MIT License</a>
  </ul>
</div>
</body>
</html>
