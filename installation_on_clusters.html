<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="author" content="SXS Collaboration">
    <meta name="generator" content="Doxygen 1.9.3"/>
  <title>SpECTRE: Installation on Clusters</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="./MathJax.js"></script>
  <link href="octicons.css" rel="stylesheet">
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
  <script src="https://unpkg.com/@popperjs/core@2"></script>
  <script src="https://unpkg.com/tippy.js@6"></script>
  <script type="text/javascript" src="spectre.js"></script>
  <script type="text/javascript" src="doxygen-navtree-hacks.js"></script>
  <script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
  <script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
  <script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
  <script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeParagraphLink.init()
  </script>
  </head>
  <body>
  <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
  <div id="titlearea">
    <table cellspacing="0" cellpadding="0">
      <tbody>
        <tr style="height: 56px;">
          <td id="projectalign" style="padding-left: 0.5em;">
            <div id="projectname">
              <a href="index.html">SpECTRE</a>
              &#160;<span id="projectnumber">v2023.06.19</span>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('installation_on_clusters.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Installation on Clusters </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md17">General Instructions</a></li>
<li class="level1"><a href="#autotoc_md18">Anvil at Purdue University</a></li>
<li class="level1"><a href="#autotoc_md19">Cedar, Graham, and Niagara at ComputeCanada</a></li>
<li class="level1"><a href="#autotoc_md20">Frontera at TACC</a></li>
<li class="level1"><a href="#autotoc_md21">Wheeler at Caltech</a></li>
<li class="level1"><a href="#autotoc_md22">CaltechHPC at Caltech</a></li>
<li class="level1"><a href="#autotoc_md23">Ocean at Fullerton</a></li>
</ul>
</div>
<div class="textblock"><p ><a class="anchor" id="md_docs_Installation_InstallationOnClusters"></a></p>
<p >The installation instructions are the same for most systems because we use shell scripts to set up the environment for each supercomputer. We describe the generic installation instructions once, and only note special instructions if necessary for the particular system. If you have already built SpECTRE and just want to load the modules, source the shell file for your system and run <code>spectre_load_modules</code>.</p>
<dl class="section note"><dt>Note</dt><dd>Sample submit scripts for some systems are available in <code>support/SubmitScripts</code>.</dd></dl>
<h1><a class="anchor" id="autotoc_md17"></a>
General Instructions</h1>
<ol type="1">
<li>Run <code>export SPECTRE_HOME=/path/to/where/you/want/to/clone</code></li>
<li>Clone SpECTRE using <code>git clone SPECTRE_URL $SPECTRE_HOME</code></li>
<li>Run <code>cd $SPECTRE_HOME &amp;&amp; mkdir build &amp;&amp; cd build</code></li>
<li>Run <code>. $SPECTRE_HOME/support/Environments/SYSTEM_TO_RUN_ON_gcc.sh</code>, where <code>SYSTEM_TO_RUN_ON</code> is replaced by the name of the system as described in the relevant section below.</li>
<li>If you haven't already installed the dependencies, run <code>export SPECTRE_DEPS=/path/to/where/you/want/the/deps</code> Then run <code>spectre_setup_modules $SPECTRE_DEPS</code>. This will take a while to finish. Near the end the command will tell you how to make the modules available by providing a <code>module use</code> command. Make sure you are providing an absolute path to <code>spectre_setup_modules</code>.</li>
<li>Run <code>module use $SPECTRE_DEPS/modules</code></li>
<li>Run <code>spectre_run_cmake</code>, if you get module loading errors run <code>spectre_unload_modules</code> and try running <code>spectre_run_cmake</code> again. CMake should set up successfully.</li>
<li>Build the targets you are interested in by running, e.g. <code>make -j4 test-executables</code></li>
</ol>
<h1><a class="anchor" id="autotoc_md18"></a>
Anvil at Purdue University</h1>
<p >You should build and run tests on a compute node. You can get a compute node by running </p><div class="fragment"><div class="line">sinteractive -N1 -n 20 -p debug -t 60:00</div>
</div><!-- fragment --><p> Avoid running <code>module purge</code> because this also removes various default modules that are necessary for proper operation. Instead, use <code>module restore</code>. Currently the tests can only be run in serial, e.g. <code>ctest -j1</code> because all the MPI jobs end up being launched on the same core.</p>
<h1><a class="anchor" id="autotoc_md19"></a>
Cedar, Graham, and Niagara at ComputeCanada</h1>
<p >Use <code>compute_canada</code> as the <code>SYSTEM_TO_RUN_ON</code> in the general instructions.</p>
<h1><a class="anchor" id="autotoc_md20"></a>
Frontera at TACC</h1>
<p >Follow the general instructions, using <code>frontera</code> for <code>SYSTEM_TO_RUN_ON</code>.</p>
<p >Processes running on the head nodes have restrictions on memory use that will prevent linking the main executables. It is better to compile on an interactive node. Interactive nodes can be requested with the <code>idev</code> command.</p>
<p >For unknown reasons, incremental builds work poorly on frontera. Running <code>make</code> will often unnecessarily recompile SpECTRE libraries.</p>
<h1><a class="anchor" id="autotoc_md21"></a>
Wheeler at Caltech</h1>
<p >Follow the general instructions using <code>wheeler</code> for <code>SYSTEM_TO_RUN_ON</code>, except you do not need to install any dependencies, so you can skip steps 5 and 6. You can optionally compile using LLVM/Clang by sourcing <code>wheeler_clang.sh</code> instead of <code>wheeler_gcc.sh</code></p>
<h1><a class="anchor" id="autotoc_md22"></a>
CaltechHPC at Caltech</h1>
<p >Follow the general instructions, using <code>caltech_hpc</code> for <code>SYSTEM_TO_RUN_ON</code>. When you go to build, you will need to get an interactive node (login nodes limit the amount of memory accessible to individual users, to below the amount necessary to build SpECTRE). To ensure you get an entire node to build on, use the command: </p><div class="fragment"><div class="line">srun -t 02:00:00 -N 1 -c 32 --mem=192000 -A sxs -D . --pty /bin/bash</div>
</div><!-- fragment --><p> being sure to re-source environment files once you get the interactive node shell.</p>
<h1><a class="anchor" id="autotoc_md23"></a>
Ocean at Fullerton</h1>
<p >Follow the general instructions, using <code>ocean</code> for <code>SYSTEM_TO_RUN_ON</code>, you do not need to install any dependencies, so you can skip steps 5 and 6. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="installation.html">Installation</a></li>
    <li class="footer">
    &copy; Copyright 2017 - 2023
    <a href="https://black-holes.org">SXS Collaboration</a>,
    <a href="LICENSE.txt" target="_blank">
    <span class="hidden-xs">Distributed under the</span>
    MIT License</a>
  </ul>
</div>
</body>
</html>
